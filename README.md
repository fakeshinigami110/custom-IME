# Custom IME - Advanced Input Method Engine for fcitx5

<div align=center>
    
![GitHub last commit](https://img.shields.io/github/last-commit/fakeshinigami110/custom-ime?style=for-the-badge&labelColor=101418&color=9ccbfb)
![Go](https://img.shields.io/badge/Go-1.25+-00ADD8?style=for-the-badge&logo=go)
![C++](https://img.shields.io/badge/C++-17-00599C?style=for-the-badge&logo=c%2B%2B)
![fcitx5](https://img.shields.io/badge/fcitx5-5.1+-blue?style=for-the-badge)

</div>

Custom IME is a powerful CLI tool for creating and managing custom Input Method Engines (IMEs) for the fcitx5 input method framework. It enables developers and enthusiasts to create sophisticated input methods with advanced features like real-time character mapping, keyword substitution, and multiple display modes.

## Quick Demo
https://github.com/user-attachments/assets/da6df4a6-571b-465b-acb8-d4b6b717da7b

## Features

### Advanced Input Modes

- **Original Mode**: Direct character-by-character input with real-time conversion
- **Toggle Display Mode**: Simultaneous display of both original and mapped characters during input, with only converted text committed
- **Print Mode**: Two-line display showing original text above and converted text below

### Intelligent Text Processing

- **Keyword Ignore System**: Dynamic keyword recognition with toggle functionality (F7)
- **Context-Aware Mapping**: Support for different character sets (lowercase, uppercase, digits, operators)
- **Configurable Behavior**: Customizable settings for number conversion, case sensitivity, and unknown character handling

### Professional Workflow

- **Multiple Commit Methods**: Text commitment using Enter or Space keys
- **Real-time Preview**: Live preview of conversions across different modes
- **Flexible Configuration**: Easy-to-edit configuration files for custom mappings





## Installation

### AUR Installation (Recommended)

```bash
yay -S custom-ime
```

or

```bash
paru -S custom-ime
```

### Dependencies

The following dependencies are required:

- **fcitx5** - Input method framework
- **cmake** - Build system
- **gcc** - C/C++ compiler
- **make** - GNU Make
- **go** - Go compiler (â‰¥1.25)
- **git** - Version control

Additional development libraries:
- xcb-proto, libxcb, expat, pkgconf, json-c, dbus, fmt, unicode-cldr-annotations

### Automated Dependency Installation

Use the prerequisites script to view installation commands for your distribution:

```bash
./prerequisites.sh
```

### Manual Installation

```bash
# Clone the repository
git clone https://github.com/fakeshinigami110/custom-IME.git
cd custom-IME

# Install dependencies (see prerequisites.sh for your distribution)
sudo pacman -S fcitx5 cmake base-devel go git

# Build and install
./install.sh
```

## Quick Start

### Creating a New IME Project

```bash
custom-ime create -p myproject -n cuneiform -l Cun -L en -c test.conf -D "Cuneiform Input Method"
```

### Installing the IME

```bash
custom-ime install -p myproject
```

### Add IME to fcitx5

#### Open fcitx5 configuration tool
```bash
fcitx5-configtool
# Or via GUI: System Settings > Regional Settings > Input Method
```
In fcitx5-configtool:

    Click "+" button

    Uncheck "Only Show Current Language"

    Find your IME (e.g., "Cuneiform")

    Add and apply


### Project Management

```bash
# List all projects
custom-ime list

# Delete project sources
custom-ime delete -p myproject -d

# Uninstall IME
custom-ime delete -p myproject -u
```

## Configuration

#### IMEs databse is on your `~/.fcitx5-projects.json` please **DO NOT** edit it manually.
Custom IME uses simple configuration files to define character mappings and behavior. Here's a sample configuration structure :

```ini
# Cuneiform IME Configuration for fcitx5
# generated by Omikami

[Settings]
convert_numbers=false
unknown_chars_behavior=keep
add_spaces=true
number_separator=
case_sensitive=true

[Characters]
a=ğ 
b=ğ²
c=ğ¨
d=ğ­
e=ğ¡

[Capitals]
A=ğ’€€
B=ğ’
C=ğ’…´

[Digits]
0=ğ’”
1=ğ’•
2=ğ’–

[Keywords]
var=ğ’‰¿
int=ğ’‘ğ’•ğ’•
float=ğ’‘ğ’•ğ’•ğ’‘±

[Operators]
== = ğ’€€ğ’€€
!= = ğ’€€ğ’„¿
+ = ğ’ˆ
```
you can find the full sample on [test.conf](test.conf)

### Edit config file after installation
#### You can find config file of each project  on <br> `~/.config/custom-ime/projectName/config/projectName.conf` <br>
after any change use the following command to reaload:
```bash
fcitx5 -rd
```
## Usage

### Input Mode Switching

- **F8**: Cycle through input modes (Original â†’ Toggle â†’ Print)
- **F7**: Toggle keyword ignore functionality

### Text Commitment

- **Enter** or **Space**: Commit converted text
- Real-time preview in Toggle and Print modes

### Configuration

Create custom configuration files to define:
- Character mappings for different cases
- Special keyword substitutions
- Operator conversions
- Behavioral settings


## Development

### Building from Source

```bash
go build -o custom-ime
```

### Contributing

Contributions are welcome! Please feel free to submit pull requests or open issues for bugs and feature requests.

## License

This project is licensed under the GPL3 License - see the LICENSE file for details.

## Support

For issues and questions:
- Check existing issues on GitHub
- Review the documentation
- Examine sample configurations

## Acknowledgments

- fcitx5 team for the excellent input method framework
- Go community for robust tooling and libraries
- Arch Linux AUR maintainers for packaging support

---

**Custom IME** - Empowering custom input methods for specialized workflows and linguistic requirements.
---
### Powered by Omokami (Shinigami_110)
You can [contact me on Telegram](https://t.me/shinigami_110) using this link.
